{% extends 'admin/base.html' %}
{% block content %}
<h4>{% if variant %}ویرایش واریانت: {{ variant.sku }}{% else %}افزودن واریانت جدید{% endif %}</h4>
<form method="POST">
  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label">محصول</label>
      <select name="product_id" class="form-select" required>
        <option value="">--- انتخاب محصول ---</option>
        {% for p in products %}
          <option value="{{ p.product_id }}" {% if variant and variant.product_id==p.product_id %}selected{% endif %}>{{ p.product_name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-6 mb-3">
      <label class="form-label">SKU</label>
      <input name="sku" class="form-control" required value="{{ variant.sku if variant }}">
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label">نام واریانت</label>
      <input name="variant_name" class="form-control" value="{{ variant.variant_name if variant }}">
    </div>
    <div class="col-md-3 mb-3">
      <label class="form-label">مقدار اندازه</label>
      <input name="size_value" type="number" step="0.01" class="form-control" value="{{ variant.size_value if variant }}">
    </div>
    <div class="col-md-3 mb-3">
      <label class="form-label"> اندازه</label>
      <input name="size_unit" class="form-control" value="{{ variant.size_unit if variant }}">
    </div>
  </div>
  <div class="row">
    <div class="col-md-4 mb-3">
      <label class="form-label">قیمت عمده</label>
      <input name="wholesale_price" type="number" step="0.01" class="form-control" value="{{ variant.wholesale_price if variant else 0 }}">
    </div>
    <div class="col-md-4 mb-3">
      <label class="form-label">قیمت خرده</label>
      <input name="retail_price" type="number" step="0.01" class="form-control" value="{{ variant.retail_price if variant else 0 }}">
    </div>
    <div class="col-md-4 mb-3">
      <label class="form-label">موجودی</label>
      <input name="stock_quantity" type="number" class="form-control" value="{{ variant.stock_quantity if variant else 0 }}">
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label">وضعیت</label>
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" name="is_active" id="is_active" {% if not variant or variant.is_active %}checked{% endif %}>
        <label class="form-check-label" for="is_active">فعال</label>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <label class="form-label">پیش‌فرض</label>
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" name="is_default" id="is_default" {% if variant and variant.is_default %}checked{% endif %}>
        <label class="form-check-label" for="is_default">بله</label>
      </div>
    </div>
  </div>
  <div class="d-flex gap-2">
    <button type="submit" class="btn btn-primary">ذخیره</button>
    <a href="{{ url_for('admin.variants_list') }}" class="btn btn-secondary">انصراف</a>
  </div>
</form>
{% endblock %}